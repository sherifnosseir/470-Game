<!DOCTYPE html>
<html>
	<head>
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script src="/socket.io/socket.io.js"></script>
		<title>noway</title>
	</head>
	<body>
		<h1>TanksView</h1>
		<p id="text">aseasease</p>

		<div>
			<canvas id="canvas" width="500" height="500"></canvas>
		</div>		
		
<script>

	function draw(x,y){
		var canvas = document.getElementById("canvas");
		var ctx = canvas.getContext("2d");
		//ctx.clearRect(0 , 0, 500, 500);
		ctx.fillStyle = "rgb(200,0,0)";
		ctx.fillRect (x, y, 15, 10);	
	}

	function clearCanvas() {
		var canvas = document.getElementById("canvas");
		var ctx = canvas.getContext("2d");
		ctx.clearRect(0 , 0, 500, 500);
	}

	window.onload = function() {
		// movement [client side]
		document.addEventListener("keydown", function(e) {
			//console.log('zzzzzzzzz');
			if (e.keyCode=="65") {
				//console.log('aseaseaseaseaseasease');
				socket.emit('move_left');
			}
			else if (e.keyCode="68") {
				socket.emit('move_right');
			}

		});		
	};

	var socket = io.connect('http://localhost:8000');
	var idClient;

	socket.on('connect', function() {

	});




	socket.on('draw', function(tanksArray) {
		clearCanvas();
		for (i = 0; i<tanksArray.length; i++) {
			console.log(tanksArray[i].id);
			console.log(tanksArray[i].x);
			draw(tanksArray[i].x, tanksArray[i].y);
		};



	});

	socket.on('setID', function(id) {
		idClient = id;
	});





</script>

	</body>
</html>